# Интернет-магазин  
  
**1. Обернуть приложение в docker-образ и запушить его на Dockerhub**
  
Создать минимальный сервис, который:  
 - отвечает на порту 8000  
 - имеет http-метод  `GET /health/`  
 - отдает `RESPONSE: {"status": "OK"}`
     
Cобрать локально образ приложения в докер.  
Запушить образ в dockerhub.

На выходе необходимо предоставить  
 - имя репозитория и тэг на Dockerhub  
 - ссылку на github c Dockerfile, либо приложить Dockerfile в ДЗ
 
**2. Развернуть приложение в minikube**
 
 Цель: Написать манифесты для деплоя в k8s для сервиса из прошлого ДЗ. 
  - Манифесты должны описывать сущности Deployment, Service, Ingress. В Deployment обязательно должны быть указаны Liveness, Readiness пробы. Количество реплик должно быть не меньше 2. 
  - Image контейнера должен быть указан с Dockerhub. 
  - В Ingress-е должно быть правило, которое форвардит все запросы с `/otusapp/`* на сервис с rewrite-ом пути. 
  - Хост в ингрессе должен быть *arch.homework*. В итоге после применения манифестов GET запрос на http://arch.homework/otusapp/health должен отдавать `{“status”: “OK”}`. 
  - На выходе предоставить ссылку на github c манифестами. Манифесты должны лежать в одной директории, так чтобы можно было их все применить одной командой `kubectl apply -f .`
  
**3. Добавить к развернутому приложению БД.**
  
   - Сделать простейший RESTful CRUD по созданию, удалению, просмотру и обновлению пользователей.  
  Пример API - https://app.swaggerhub.com/apis/otus55/users/1.0.0  
   - Добавить базу данных с persistent volume для приложения.  
     - Docker-Image базы данных должен использоваться из официального докер-репозитория.  
     - Под с БД должен запускаться StatefulSet-ом с количеством реплик - 1.  
     - Конфигурация приложения должна хранится в Configmaps.  
     - Доступы к БД должны храниться в Secrets.  
     - Первоначальные миграции должны быть оформлены в качестве Pod-ы (или Job-ы).  
     - Ingress-ы должны также вести на url arch.homework/otusapp/* (как и в прошлом занятии)  
    
  На выходе должны быть предоставлена :
   - Cсылка на директорию в github, где находится директория с манифестами кубернетеса  
   - Команда `kubectl apply -f`, которая запускает в правильном порядке манифесты кубернетеса.  
   - Postman коллекция, в которой будут представлены примеры запросов к сервису на создание, получение, изменение и удаление пользователя. Запросы из коллекции должны работать сразу после применения манифестов, без каких-то дополнительных подготовительных действий.  
    
  Задание со звездочкой (необязательное, но дает дополнительные баллы):  
   - +3 балла за шаблонизацию приложения в helm 3 чартах  
   - +2 балла за использование официального helm чарта для БД и подключение его в чарт приложения в качестве зависимости.